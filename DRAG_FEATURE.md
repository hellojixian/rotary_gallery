# 🖱️ 鼠标拖拽实时浏览功能

## ✨ 功能概述

实现了基于鼠标横向拖拽的实时图片浏览功能，就像滑动条一样直观。用户可以通过鼠标拖拽来实时控制显示哪张图片，拖拽位置直接对应图片序列中的位置。

## 🎯 交互逻辑

### 基本原理
- **窗口宽度 = 100%**: 整个浏览器窗口宽度代表所有图片的范围
- **拖拽位置 = 图片位置**: 鼠标横向拖拽的位置直接对应要显示的图片
- **实时响应**: 拖拽过程中图片实时切换，无延迟

### 具体实现
```
窗口左边缘 ←→ 窗口右边缘
第1张图片 ←→ 最后一张图片

拖拽距离 / 窗口宽度 = 图片进度百分比
```

## 🎮 使用方法

### 开始拖拽
1. 在图片区域按下鼠标左键
2. 保持按下状态，横向移动鼠标
3. 图片会根据鼠标位置实时切换

### 拖拽过程
- **向右拖拽**: 显示前面的图片
- **向左拖拽**: 显示后面的图片
- **拖拽距离**: 决定跳转到哪张图片
- **实时反馈**: 顶部显示拖拽进度条

### 结束拖拽
- 松开鼠标左键即可停止拖拽
- 当前显示的图片会被设置为新的当前图片

## 🎨 视觉反馈

### 拖拽进度提示
```
┌─────────────────────────────────┐
│        拖拽浏览图片              │
│  ████████████░░░░░░░░░░░░░░░    │
└─────────────────────────────────┘
```

- **位置**: 屏幕顶部中央
- **进度条**: 绿色渐变，带发光效果
- **文字提示**: "拖拽浏览图片"
- **动画**: 平滑的淡入淡出效果

### 鼠标光标
- **正常状态**: `grab` (抓手)
- **拖拽状态**: `grabbing` (抓取中)
- **放大状态**: 保持原有的缩放拖拽功能

## 🔧 技术实现

### 核心算法
```typescript
// 根据拖拽位置计算图片索引
const calculateImageIndexFromDrag = (clientX: number, containerWidth: number) => {
  const dragStartX = dragStart.x;
  const deltaX = clientX - dragStartX;
  const progress = deltaX / containerWidth;
  
  // 计算基于拖拽的图片索引
  const draggedIndex = currentImageIndex - progress * totalImages;
  
  // 支持循环浏览
  let targetIndex = draggedIndex;
  while (targetIndex < 0) targetIndex += totalImages;
  while (targetIndex >= totalImages) targetIndex -= totalImages;
  
  return Math.round(targetIndex) % totalImages;
};
```

### 状态管理
```typescript
const [isImageSwitchDrag, setIsImageSwitchDrag] = useState(false);
const [dragProgress, setDragProgress] = useState(0); // 拖拽进度 0-1
const [isDragActive, setIsDragActive] = useState(false);
```

### 事件处理
1. **mouseDown**: 开始拖拽，记录起始位置
2. **mouseMove**: 实时计算并更新图片索引
3. **mouseUp**: 结束拖拽，清理状态

## 📱 移动端适配

### 触摸支持
- 保持原有的触摸滑动切换功能
- 拖拽功能主要针对桌面端鼠标操作

### 响应式设计
- 进度提示在移动端有优化的尺寸
- 触摸设备上保持原有的滑动体验

## 🎯 用户体验

### 优势
- **直观性**: 拖拽位置直接对应图片位置
- **精确性**: 可以精确跳转到任意图片
- **流畅性**: 实时响应，无延迟
- **可预测性**: 用户能清楚知道拖拽会产生什么效果

### 使用场景
- **快速浏览**: 想要快速查看特定位置的图片
- **精确定位**: 需要跳转到序列中的特定图片
- **连续浏览**: 想要以自己的节奏浏览图片

## 🔄 与其他功能的协调

### 缩放功能
- **未缩放状态**: 拖拽切换图片
- **缩放状态**: 拖拽移动图片位置
- **自动切换**: 根据缩放状态自动选择拖拽行为

### 自动播放
- 拖拽过程中自动播放会继续运行
- 拖拽结束后从新位置继续播放

### 键盘控制
- 键盘快捷键与拖拽功能并行工作
- 不会相互冲突

## 🎊 效果演示

### 操作流程
1. 进入相册，等待图片预加载完成
2. 在图片区域按下鼠标左键
3. 向左或向右拖拽鼠标
4. 观察图片实时切换和进度提示
5. 松开鼠标完成操作

### 预期效果
- 拖拽过程流畅无卡顿
- 图片切换与鼠标位置精确对应
- 进度提示清晰易懂
- 操作直观自然

---

🎉 **现在就去体验吧！** 这个功能让图片浏览变得更加直观和高效！
